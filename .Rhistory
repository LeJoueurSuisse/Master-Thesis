as_tsibble() %>%
filter_index(. ~ "2022-11-01") %>%
autoplot() +
ggtitle("Total energy consumed by end users") +
ylab("Ammount in million of kWh") + xlab("Date") #Check outliers
general_df %>%
group_by(month) %>% summarize(Total_cons = sum(end_users_cons)/1000000) %>%
as_tsibble() %>%
filter_index(. ~ "2022-11-01") %>%
autoplot() +
ggtitle("Total energy consumed by end users") +
ylab("Ammount in million of kWh") + xlab("Date") #Check outliers
general_df %>%
group_by(Month) %>%
summarise(Total = sum(end_users_cons)) %>%
as_tsibble() %>%
gg_subseries(Total) +
ylab("Total sales") +
xlab("Month") +
ggtitle("Seasonal subseries plot: TX_+ store sales")
general_df %>%
group_by(month) %>%
summarise(Total = sum(end_users_cons)) %>%
as_tsibble() %>%
gg_subseries(Total) +
ylab("Total sales") +
xlab("Month") +
ggtitle("Seasonal subseries plot: TX_+ store sales")
general_df %>%
group_by(month) %>%
summarise(Total = sum(end_users_cons)) %>%
as_tsibble() %>%
filter_index("2022-01-01" ~ "2022-11-01") %>%
gg_subseries(Total) +
ylab("Total sales") +
xlab("Month") +
ggtitle("Seasonal subseries plot: TX_+ store sales")
general_df %>%
group_by(month) %>%
summarise(Total = sum(end_users_cons)) %>%
as_tsibble() %>%
filter_index("2021-01-01" ~ "2021-11-01") %>%
gg_subseries(Total) +
ylab("Total sales") +
xlab("Month") +
ggtitle("Seasonal subseries plot: TX_+ store sales")
general_df %>%
group_by(month) %>%
summarise(Total = sum(end_users_cons)) %>%
as_tsibble() %>%
filter_index("2018-01-01" ~ "2018-11-01") %>%
gg_subseries(Total) +
ylab("Total sales") +
xlab("Month") +
ggtitle("Seasonal subseries plot: TX_+ store sales")
general_df %>%
group_by(month) %>% summarize(Total_cons = sum(end_users_cons)/1000000) %>%
as_tsibble() %>%
filter_index(. ~ "2022-11-01") %>%
autoplot() +
ggtitle("Total energy consumed by end users") +
ylab("Ammount in million of kWh") + xlab("Date") #Check outliers
general_df %>%
group_by(month) %>% summarize(Total_cons = sum(end_users_cons)/1000000) %>%
as_tsibble() %>%
filter_index(. ~ "2022-11-01") %>%
autoplot() +
ggtitle("Total energy consumed by end users") +
ylab("Ammount in million of kWh") + xlab("Date") #Check outliers
general_df %>%
group_by(month) %>% summarize(Total_cons = sum(end_users_cons)/1000000) %>%
as_tsibble() %>%
filter_index(. ~ "2022-11-01") %>%
gg_subseries() +
ggtitle("Total energy consumed by end users") +
ylab("Ammount in million of kWh") + xlab("Date") #Check outliers
bla <- general_df %>%
group_by(month) %>% summarize(Total_cons = sum(end_users_cons)/1000000) %>%
as_tsibble() %>%
filter_index(. ~ "2022-11-01")
View(bla)
bla %>%
gg_subseries() +
ggtitle("Total energy consumed by end users") +
ylab("Ammount in million of kWh") + xlab("Date") #Check outliers
bla %>%
gg_subseries(Total_cons) +
ggtitle("Total energy consumed by end users") +
ylab("Ammount in million of kWh") + xlab("Date") #Check outliers
bla <- general_df %>%
group_by(month) %>% summarize(Total_cons = sum(end_users_cons)/1000000) %>%
as_tsibble() %>%
filter_index("2022-11-01" ~ "2022-11-01")
bla <- general_df %>%
group_by(month) %>% summarize(Total_cons = sum(end_users_cons)/1000000) %>%
as_tsibble() %>%
filter_index("2016-01-01" ~ "2016-12-01")
bla %>%
gg_subseries(Total_cons) +
ggtitle("Total energy consumed by end users") +
ylab("Ammount in million of kWh") + xlab("Date") #Check outliers
bla %>%
gg_subseries(month()) +
ggtitle("Total energy consumed by end users") +
ylab("Ammount in million of kWh") + xlab("Date") #Check outliers
bla %>%
gg_subseries(month) +
ggtitle("Total energy consumed by end users") +
ylab("Ammount in million of kWh") + xlab("Date") #Check outliers
bla %>%
gg_subseries(month) +
ggtitle("Total energy consumed by end users") +
ylab("Ammount in million of kWh") + xlab("Date") #Check outliers
bla %>%
fill_gaps() %>%
gg_subseries(Total_cons) +
ggtitle("Total energy consumed by end users") +
ylab("Ammount in million of kWh") + xlab("Date") #Check outliers
bla <- general_df %>%
group_by(month) %>% summarize(Total_cons = sum(end_users_cons)/1000000) %>%
as_tsibble() %>%
filter_index("2016-01-01" ~ "2016-12-01") %>%
fill_gaps
View(bla)
general_df %>%
group_by(month) %>% summarize(Total_cons = sum(end_users_cons)/1000000) %>%
as_tsibble() %>%
filter_index(. ~ "2022-11-01") %>%
autoplot() +
ggtitle("Total energy consumed by end users") +
ylab("Ammount in million of kWh") + xlab("Date") #Check outliers
general_df %>%
group_by(month) %>%
summarise(Total = sum(end_users_cons)) %>%
as_tsibble() %>%
filter_index("2018-01-01" ~ "2018-11-01") %>%
gg_subseries(Total) +
ylab("Total sales") +
xlab("Month") +
ggtitle("Seasonal subseries plot: TX_+ store sales")
general_df %>%
group_by(month) %>%
summarise(Total = sum(end_users_cons)) %>%
as_tsibble() %>%
filter_index("2016-01-01" ~ "2022-11-01") %>%
gg_subseries(Total) +
ylab("Total sales") +
xlab("Month") +
ggtitle("Seasonal subseries plot: TX_+ store sales")
bla <- general_df %>%
group_by(month) %>%
summarise(Total = sum(end_users_cons)) %>%
as_tsibble() %>%
filter_index("2016-01-01" ~ "2022-11-01")
View(bla)
general_dfM <- general_df %>%
mutate(Month = yearmonth(Day)) %>%
as_tibble()
general_dfM <- general_df %>%
mutate(Month = yearmonth(day)) %>%
as_tibble()
View(general_df)
general_dfM <- general_df %>%
mutate(Month = yearmonth(date)) %>%
as_tibble()
View(general_dfM)
general_dfM <- general_df %>%
mutate(month = yearmonth(date)) %>%
as_tibble()
general_dfM <- general_df %>%
mutate(month = yearmonth(date)) %>%
as_tibble()
general_dfM %>%
group_by(month) %>%
summarise(Total = sum(end_users_cons)) %>%
as_tsibble() %>%
filter_index("2016-01-01" ~ "2022-11-01") %>%
gg_subseries(Total) +
ylab("Total sales") +
xlab("Month") +
ggtitle("Seasonal subseries plot: TX_+ store sales")
general_df %>%
group_by(month) %>% summarize(Total_cons = sum(end_users_cons)/1000000) %>%
as_tsibble() %>%
filter_index(. ~ "2022-11-01") %>%
autoplot() +
ggtitle("Total energy consumed by end users") +
ylab("Ammount in million of kWh") + xlab("Date") #Check outliers
general_dfM %>%
group_by(month) %>%
summarise(Total = sum(end_users_cons)) %>%
as_tsibble() %>%
filter_index("2016-01-01" ~ "2022-11-01") %>%
gg_subseries(Total) +
ylab("Total sales") +
xlab("Month") +
ggtitle("Seasonal subseries plot: TX_+ store sales")
general_df %>%
group_by(month) %>% summarize(Total_cons = sum(end_users_cons)/1000000) %>%
as_tsibble() %>%
filter_index(. ~ "2022-11-01") %>%
autoplot() +
ggtitle("Total energy consumed by end users") +
ylab("Ammount in million of kWh") + xlab("Date") #Check outliers
general_dfM %>%
group_by(month) %>%
summarise(Total = sum(end_users_cons)) %>%
as_tsibble() %>%
filter_index("2016-01-01" ~ "2022-11-01") %>%
gg_subseries(Total) +
ylab("Total sales") +
xlab("Month") +
ggtitle("Seasonal subseries plot: TX_+ store sales")
general_df %>%
group_by(month) %>% summarize(Total_cons = sum(end_users_cons)/1000000) %>%
as_tsibble() %>%
filter_index(. ~ "2022-11-01") %>%
autoplot() +
ggtitle("Total energy consumed by end users") +
ylab("Ammount in million of kWh") + xlab("Date") #Check outliers
general_dfM %>%
group_by(month) %>%
summarise(Total = sum(end_users_cons)) %>%
as_tsibble() %>%
filter_index("2016-01-01" ~ "2022-11-01") %>%
gg_subseries(Total) +
ylab("Total sales") +
xlab("Month") +
ggtitle("Seasonal subseries plot: TX_+ store sales")
general_dfM %>%
group_by(month) %>%
summarise(Total = sum(end_users_cons)) %>%
as_tsibble() %>%
filter_index("2016-01-01" ~ "2022-11-01") %>%
gg_subseries(Total) +
ylab("Total sales") +
xlab("Month") +
ggtitle("Seasonal subseries plot: End users consumption")
general_dfM %>%
group_by(month) %>%
summarise(Total = sum(energy_prod)) %>%
as_tsibble() %>%
filter_index("2016-01-01" ~ "2022-11-01") %>%
gg_subseries(Total) +
ylab("Total sales") +
xlab("Month") +
ggtitle("Seasonal subseries plot: End users consumption")
general_dfM %>%
group_by(month) %>%
summarise(Total = sum(energy_cons)) %>%
as_tsibble() %>%
filter_index("2016-01-01" ~ "2022-11-01") %>%
gg_subseries(Total) +
ylab("Total sales") +
xlab("Month") +
ggtitle("Seasonal subseries plot: End users consumption")
general_dfM <- general_df %>%
mutate(month = yearmonth(date)) %>%
as_tibble()
general_df %>%
group_by(month) %>% summarize(Total_cons = sum(end_users_cons)/1000000) %>%
as_tsibble() %>%
filter_index(. ~ "2022-11-01") %>%
autoplot() +
ggtitle("Total energy consumed by end users") +
ylab("Ammount in million of kWh") + xlab("Date") #Check outliers
general_df %>%
group_by(month) %>% summarize(Total_cons = sum(end_users_cons)/1000000) %>%
as_tsibble() %>%
filter_index(. ~ "2022-11-01") %>%
autoplot() +
ggtitle("Total energy consumed by end users") +
ylab("Ammount in million of kWh") + xlab("Date") #Check outliers
general_df %>%
group_by(month) %>% summarize(Total_cons = sum(energy_cons)/1000000) %>%
as_tsibble() %>%
filter_index(. ~ "2022-11-01") %>%
autoplot() +
ggtitle("Total energy consumed in CH") +
ylab("Ammount in million of kWh") + xlab("Date") #Check outliers
general_df %>%
group_by(month) %>% summarize(Total_cons = sum(end_users_cons)/1000000) %>%
as_tsibble() %>%
filter_index(. ~ "2022-11-01") %>%
autoplot() +
ggtitle("Total energy consumed by end users") +
ylab("Ammount in million of kWh") + xlab("Date") #Check outliers
general_df %>%
group_by(month) %>% summarize(Total_cons = sum(energy_cons)/1000000) %>%
as_tsibble() %>%
filter_index(. ~ "2022-11-01") %>%
autoplot() +
ggtitle("Total energy consumed in CH") +
ylab("Ammount in million of kWh") + xlab("Date") #Check outliers
general_df %>%
group_by(month) %>% summarize(Total_cons = sum(end_users_cons)/1000000) %>%
as_tsibble() %>%
filter_index(. ~ "2022-11-01") %>%
autoplot() +
ggtitle("Total energy consumed by end users") +
ylab("Ammount in million of kWh") + xlab("Date") #Check outliers
general_df %>%
group_by(month) %>% summarize(Total_cons = sum(energy_cons)/1000000) %>%
as_tsibble() %>%
filter_index(. ~ "2022-11-01") %>%
autoplot() +
ggtitle("Total energy consumed in CH") +
ylab("Ammount in million of kWh") + xlab("Date") #Check outliers
general_df %>%
group_by(month) %>% summarize(Total_cons = sum(energy_prod)/1000000) %>%
as_tsibble() %>%
filter_index(. ~ "2022-11-01") %>%
autoplot() +
ggtitle("Total energy produced by CH") +
ylab("Ammount in million of kWh") + xlab("Date") #Check outliers
general_dfM %>%
group_by(month) %>%
summarise(Total = sum(end_users_cons)) %>%
as_tsibble() %>%
filter_index("2016-01-01" ~ "2022-11-01") %>%
gg_subseries(Total) +
ylab("Total sales") +
xlab("Month") +
ggtitle("Seasonal subseries plot: End users consumption")
general_dfM %>%
group_by(month) %>%
summarise(Total = sum(energy_cons)) %>%
as_tsibble() %>%
filter_index("2016-01-01" ~ "2022-11-01") %>%
gg_subseries(Total) +
ylab("Total sales") +
xlab("Month") +
ggtitle("Seasonal subseries plot: End users consumption")
general_dfM %>%
group_by(month) %>%
summarise(Total = sum(end_users_cons)/1000000) %>%
as_tsibble() %>%
filter_index("2016-01-01" ~ "2022-11-01") %>%
gg_subseries(Total) +
ylab("Total sales") +
xlab("Month") +
ggtitle("Seasonal subseries plot: End users consumption")
general_dfM %>%
group_by(month) %>%
summarise(Total = sum(energy_cons)/1000000) %>%
as_tsibble() %>%
filter_index("2016-01-01" ~ "2022-11-01") %>%
gg_subseries(Total) +
ylab("Total sales") +
xlab("Month") +
ggtitle("Seasonal subseries plot: End users consumption")
ggplot(data = general_dfM %>%
group_by(month) %>%
summarise(Total = sum(energy_prod)/1000000)) +
geom_bar(aes(y = Total, x = month, fill = Year), stat = "identity") +
coord_flip()+
facet_grid(.~Year) +
xlab("Month") +
scale_colour_discrete("Year") +
ylab("Total Sales") +
ggtitle("Total sales of items per month")
View(general_dfM)
general_dfM <- general_df %>%
mutate(month = yearmonth(date), year = year(date)) %>%
as_tibble()
View(general_dfM)
ggplot(data = general_dfM %>%
group_by(month, year) %>%
summarise(Total = sum(energy_prod)/1000000)) +
geom_bar(aes(y = Total, x = month, fill = year), stat = "identity") +
coord_flip()+
facet_grid(.~year) +
xlab("Month") +
scale_colour_discrete("Year") +
ylab("Total Sales") +
ggtitle("Total sales of items per month")
bla <- general_dfM %>%
group_by(month, year) %>%
summarise(Total = sum(energy_prod)/1000000)
View(bla)
group_by(month, year) %>%
summarise(Total = sum(energy_prod)/1000000)
bla <- general_dfM %>%
mutate(month = month(date)) %>%
group_by(month, year) %>%
summarise(Total = sum(energy_prod)/1000000)
View(bla)
ggplot(bla) +
geom_bar(aes(y = Total, x = month, fill = year), stat = "identity") +
coord_flip()+
facet_grid(.~year) +
xlab("Month") +
scale_colour_discrete("Year") +
ylab("Total Sales") +
ggtitle("Total sales of items per month")
ggplot(bla) +
geom_bar(aes(y = Total, x = month, fill = year), stat = "identity") +
coord_flip()+
facet_grid(.~year) +
xlab("Month") +
scale_colour_discrete("Year") +
ylab("Total Sales") +
ggtitle("Total sales of items per month")
bla <- general_dfM %>%
mutate(month = month(date)) %>%
group_by(month, year) %>%
summarise(Total = sum(energy_cons)/1000000)
ggplot(bla) +
geom_bar(aes(y = Total, x = month, fill = year), stat = "identity") +
coord_flip()+
facet_grid(.~year) +
xlab("Month") +
scale_colour_discrete("Year") +
ylab("Total Sales") +
ggtitle("Total sales of items per month")
bla <- general_dfM %>%
mutate(month = month(date)) %>%
group_by(month, year) %>%
summarise(Total = sum(energy_prod)/1000000)
ggplot(bla) +
geom_bar(aes(y = Total, x = month, fill = year), stat = "identity") +
coord_flip()+
facet_grid(.~year) +
xlab("Month") +
scale_colour_discrete("Year") +
ylab("Total Sales") +
ggtitle("Total sales of items per month")
general_df %>%
group_by(month) %>% summarize(Total_cons = sum(end_users_cons)/1000000) %>%
as_tsibble() %>%
filter_index(. ~ "2022-11-01") %>%
autoplot() +
ggtitle("Total energy consumed by end users") +
ylab("Ammount in million of kWh") + xlab("Date") #Check outliers
general_df %>%
group_by(month) %>% summarize(Total_cons = sum(energy_prod)/1000000) %>%
as_tsibble() %>%
filter_index(. ~ "2022-11-01") %>%
autoplot() +
ggtitle("Total energy produced by CH") +
ylab("Ammount in million of kWh") + xlab("Date") #Check outliers
ggplot(bla) +
geom_bar(aes(y = Total, x = month, fill = year), stat = "identity") +
coord_flip()+
facet_grid(.~year) +
xlab("Month") +
scale_colour_discrete("Year") +
ylab("Total Sales") +
ggtitle("Total sales of items per month")
STL_dcmp <- general_df %>%
summarize(Total_sales = sum(energy_cons)) %>%
model(STL(Total_sales))
STL_dcmp <- general_df %>%
summarize(Total_sales = sum(energy_cons)) %>%
as_tsibble() %>%
model(STL(Total_sales))
general_df %>%
group_by(month) %>% summarize(Total_cons = sum(end_users_cons)/1000000) %>%
as_tsibble() %>%
filter_index(. ~ "2022-11-01") %>%
autoplot() +
ggtitle("Total energy consumed by end users") +
ylab("Ammount in million of kWh") + xlab("Date") #Check outliers
general_df %>%
group_by(date) %>% summarize(Total_cons = sum(energy_cons)/1000000) %>%
as_tsibble() %>%
filter_index("2018-11-01" ~ "2022-11-01") %>%
autoplot() +
ggtitle("Total energy consumed in Switzerland") +
ylab("Ammount in million of kWh") + xlab("Date") #Check outliers
STL_dcmp <- general_df %>%
group_by(date) %>% summarize(Total_cons = sum(energy_cons)/1000000) %>%
as_tsibble() %>%
filter_index("2018-11-01" ~ "2022-11-01") %>%
model(STL(Total_sales))
STL_dcmp <- general_df %>%
group_by(date) %>% summarize(Total_cons = sum(energy_cons)/1000000) %>%
as_tsibble() %>%
filter_index("2018-11-01" ~ "2022-11-01") %>%
model(STL(Total_cons))
general_df %>%
group_by(date) %>% summarize(Total_cons = sum(energy_cons)/1000000) %>%
as_tsibble() %>%
filter_index("2018-11-01" ~ "2022-11-01") %>%
autoplot(Total_cons, color = "gray") +
autolayer(components(STL_dcmp), trend, color = 'red') +
ggtitle("Total TX_1 store daily sales") +
ylab("sales") + xlab("Day") #Check outliers
ggplot(bla) +
geom_bar(aes(y = Total, x = month, fill = year), stat = "identity") +
coord_flip()+
facet_grid(.~year) +
xlab("Month") +
scale_colour_discrete("Year") +
ylab("Total Sales") +
ggtitle("Total sales of items per month")
general_df %>%
group_by(date) %>% summarize(Total_cons = sum(energy_cons)/1000000) %>%
as_tsibble() %>%
filter_index("2018-11-01" ~ "2022-11-01") %>%
autoplot(Total_cons, color = "gray") +
autolayer(components(STL_dcmp), trend, color = 'red') +
ggtitle("Total TX_1 store daily sales") +
ylab("sales") + xlab("Day") #Check outliers
ggplot(bla) +
geom_bar(aes(y = Total, x = month, fill = year), stat = "identity") +
coord_flip()+
facet_grid(.~year) +
xlab("Month") +
scale_colour_discrete("Year") +
ylab("Total Sales") +
ggtitle("Total sales of items per month")
