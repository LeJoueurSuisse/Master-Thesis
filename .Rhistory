general_dfM %>%
group_by(month) %>% summarize(Total_cons = sum(energy_cons)/1000000) %>%
as_tsibble() %>%
filter_index(. ~ "2022-11-01") %>%
autoplot() +
ggtitle("Total energy consumed in CH") +
ylab("Ammount in million of kWh") + xlab("Date") #Check outliers
general_df %>%
group_by(date) %>% summarize(Total_cons = sum(energy_cons)/1000000) %>%
as_tsibble() %>%
filter_index(. ~ "2022-11-01") %>%
autoplot() +
ggtitle("Total energy consumed in Switzerland") +
ylab("Ammount in million of kWh") + xlab("Date") #Check outliers
general_df %>%
group_by(date) %>% summarize(Total_cons = sum(energy_cons)/1000000) %>%
as_tsibble() %>%
filter_index("2018-11-01" ~ "2022-11-01") %>%
autoplot() +
ggtitle("Total energy consumed in Switzerland") +
ylab("Ammount in million of kWh") + xlab("Date") #Check outliers
general_df %>%
group_by(date) %>% summarize(Total_prod = sum(energy_prod)/1000000) %>%
as_tsibble() %>%
filter_index("2018-11-01" ~ "2022-11-01") %>%
autoplot() +
ggtitle("Total energy produced in Switzerland") +
ylab("Ammount in million of kWh") + xlab("Date") #Check outliers
# Monthly consumption & production
components(STL_dcmp_MC) %>% autoplot()
components(STL_dcmp_MP) %>% autoplot()
test <- general_dfM %>%
group_by(month) %>% summarize(Total_cons = sum(energy_cons)/1000000)
test2 <- general_df %>%
group_by(date) %>% summarize(Total_cons = sum(energy_cons)/1000000)
View(test)
View(test2)
remove(STL_dcmp_MC_1year)
96*30
# Monthly consumption & production
components(STL_dcmp_MC) %>% autoplot()
View(test)
general_df %>%
group_by(date) %>% summarize(Total_cons = sum(energy_cons)/1000000) %>%
as_tsibble() %>%
filter_index("2018-01-01" ~ "2022-11-01") %>%
autoplot(Total_cons, color = "gray") +
autolayer(components(STL_dcmpC), trend, color = 'red') +
ggtitle("Total TX_1 store daily sales") +
ylab("sales") + xlab("Day") #Check outliers
# Daily consumption
components(STL_dcmpC) %>% autoplot()
# ==============================================================================
general_df %>%
group_by(date) %>% summarize(Total_cons = sum(energy_cons)/1000000) %>%
as_tsibble() %>%
filter_index("2018-01-01" ~ "2022-11-01") %>%
autoplot(Total_cons, color = "gray") +
autolayer(components(STL_dcmpC), trend, color = 'red') +
ggtitle("Total TX_1 store daily sales") +
ylab("sales") + xlab("Day")
general_df %>%
group_by(date) %>% summarize(Total_cons = sum(energy_cons)/1000000) %>%
as_tsibble() %>%
filter_index("2018-01-01" ~ "2022-11-01") %>%
autoplot(Total_cons, color = "gray") +
autolayer(components(STL_dcmpC), trend, color = 'red') +
ggtitle("Total TX_1 store daily sales") +
ylab("sales") + xlab("Day")
general_df %>%
group_by(date) %>% summarize(Total_cons = sum(energy_prod)/1000000) %>%
as_tsibble() %>%
filter_index("2018-01-01" ~ "2022-11-01") %>%
autoplot(Total_cons, color = "gray") +
autolayer(components(STL_dcmpC), trend, color = 'red') +
ggtitle("Total TX_1 store daily sales") +
ylab("sales") + xlab("Day")
general_df %>%
group_by(date) %>% summarize(Total_cons = sum(energy_prod)/1000000) %>%
as_tsibble() %>%
filter_index("2018-01-01" ~ "2022-11-01") %>%
autoplot(Total_cons, color = "gray") +
autolayer(components(STL_dcmpP), trend, color = 'red') +
ggtitle("Total TX_1 store daily sales") +
ylab("sales") + xlab("Day")
general_dfM %>%
group_by(month) %>% summarize(Total_cons = sum(energy_cons)/1000000) %>%
as_tsibble() %>%
filter_index("2018-01-01" ~ "2022-11-01") %>%
autoplot(Total_cons, color = "gray") +
autolayer(components(STL_dcmp_MC), trend, color = 'red') +
ggtitle("Total TX_1 store daily sales") +
ylab("sales") + xlab("Day")
general_dfM %>%
group_by(month) %>% summarize(Total_cons = sum(energy_cons)/1000000) %>%
as_tsibble() %>%
filter_index(. ~ "2022-11-01") %>%
autoplot(Total_cons, color = "gray") +
autolayer(components(STL_dcmp_MC), trend, color = 'red') +
ggtitle("Total TX_1 store daily sales") +
ylab("sales") + xlab("Day")
# Daily consumption
components(STL_dcmpC) %>% autoplot()
# Daily production
components(STL_dcmpP) %>% autoplot()
# Monthly consumption & production
components(STL_dcmp_MC) %>% autoplot()
components(STL_dcmp_MP) %>% autoplot()
general_dfM %>%
group_by(month) %>% summarize(Total_cons = sum(energy_cons)/1000000) %>%
as_tsibble() %>%
filter_index(. ~ "2022-11-01") %>%
autoplot(Total_cons, color = "gray") +
autolayer(components(STL_dcmp_MC), trend, color = 'red') +
ggtitle("Total TX_1 store daily sales") +
ylab("sales") + xlab("Day")
general_dfP %>%
group_by(month) %>% summarize(Total_cons = sum(energy_cons)/1000000) %>%
as_tsibble() %>%
filter_index(. ~ "2022-11-01") %>%
autoplot(Total_cons, color = "gray") +
autolayer(components(STL_dcmp_MP), trend, color = 'red') +
ggtitle("Total TX_1 store daily sales") +
ylab("sales") + xlab("Day")
general_dfM %>%
group_by(month) %>% summarize(Total_cons = sum(energy_prod)/1000000) %>%
as_tsibble() %>%
filter_index(. ~ "2022-11-01") %>%
autoplot(Total_cons, color = "gray") +
autolayer(components(STL_dcmp_MP), trend, color = 'red') +
ggtitle("Total TX_1 store daily sales") +
ylab("sales") + xlab("Day")
general_df %>%
group_by(date) %>% summarize(Total_cons = sum(energy_cons)/1000000) %>%
as_tsibble() %>%
filter_index("2018-01-01" ~ "2022-11-01") %>%
autoplot(Total_cons, color = "gray") +
autolayer(components(STL_dcmpC), trend, color = 'red') +
ggtitle("Total TX_1 store daily sales") +
ylab("sales") + xlab("Day")
general_df %>%
group_by(date) %>% summarize(Total_cons = sum(energy_cons)/1000000) %>%
as_tsibble() %>%
filter_index("2018-01-01" ~ "2022-11-01") %>%
autoplot(Total_cons, color = "gray") +
autolayer(components(STL_dcmpC), season_adjust, color = 'red') +
ggtitle("Total TX_1 store daily sales") +
ylab("sales") + xlab("Day")
# Daily consumption
components(STL_dcmpC) %>% autoplot()
general_df %>%
group_by(date) %>% summarize(Total_cons = sum(energy_cons)/1000000) %>%
as_tsibble() %>%
filter_index("2018-01-01" ~ "2022-11-01") %>%
autoplot(Total_cons, color = "gray") +
autolayer(components(STL_dcmpC), season_adjust, color = 'red') +
ggtitle("Total TX_1 store daily sales") +
ylab("sales") + xlab("Day")
general_df %>%
group_by(date) %>% summarize(Total_cons = sum(energy_cons)/1000000) %>%
as_tsibble() %>%
filter_index("2018-01-01" ~ "2022-11-01") %>%
autoplot(Total_cons, color = "gray") +
autolayer(components(STL_dcmpC), trend, color = 'red') +
ggtitle("Total TX_1 store daily sales") +
ylab("sales") + xlab("Day")
general_df %>%
group_by(date) %>% summarize(Total_cons = sum(energy_cons)/1000000) %>%
as_tsibble() %>%
filter_index("2018-01-01" ~ "2022-11-01") %>%
autoplot(Total_cons, color = "gray") +
autolayer(components(STL_dcmpC), season_adjust, color = 'red') +
ggtitle("Total TX_1 store daily sales") +
ylab("sales") + xlab("Day")
general_df %>%
group_by(date) %>% summarize(Total_cons = sum(energy_cons)/1000000) %>%
as_tsibble() %>%
filter_index("2018-01-01" ~ "2022-11-01") %>%
autoplot(Total_cons) +
autolayer(general_df %>%
group_by(date) %>% summarize(Total_cons = sum(energy_cons)/1000000) %>%
as_tsibble() %>%
filter_index("2018-01-01" ~ "2022-11-01"), `5-MA`, color = 'red', size =1.2) +
ggtitle("Total TX_1 store daily sales") +
ylab("sales") + xlab("Day")
general_df %>%
group_by(date) %>% summarize(Total_cons = sum(energy_cons)/1000000) %>%
as_tsibble() %>%
filter_index("2018-01-01" ~ "2022-11-01") %>%
autoplot(Total_cons) +
autolayer(general_df %>%
group_by(date) %>% summarize(Total_cons = sum(energy_cons)/1000000) %>%
as_tsibble() %>%
filter_index("2018-01-01" ~ "2022-11-01"), slider::slide_dbl(Exports, mean,
.before = 2, .after = 2, .complete = TRUE), color = 'red', size =1.2) +
ggtitle("Total TX_1 store daily sales") +
ylab("sales") + xlab("Day")
general_df %>%
group_by(date) %>% summarize(Total_cons = sum(energy_cons)/1000000) %>%
as_tsibble() %>%
filter_index("2018-01-01" ~ "2022-11-01") %>%
autoplot(Total_cons) +
autolayer(general_df %>%
group_by(date) %>% summarize(Total_cons = sum(energy_cons)/1000000) %>%
as_tsibble() %>%
filter_index("2018-01-01" ~ "2022-11-01"), slider::slide_dbl(Total_cons, mean,
.before = 2, .after = 2, .complete = TRUE), color = 'red', size =1.2) +
ggtitle("Total TX_1 store daily sales") +
ylab("sales") + xlab("Day")
general_df %>%
group_by(date) %>% summarize(Total_cons = sum(energy_cons)/1000000) %>%
as_tsibble() %>%
filter_index("2018-01-01" ~ "2022-11-01") %>%
autoplot(Total_cons) +
autolayer(general_df %>%
group_by(date) %>% summarize(Total_cons = sum(energy_cons)/1000000) %>%
as_tsibble() %>%
filter_index("2018-01-01" ~ "2022-11-01"), slider::slide_dbl(Total_cons, mean,
.before = 2, .after = 2, .complete = TRUE), color = 'red', size =1.5) +
ggtitle("Total TX_1 store daily sales") +
ylab("sales") + xlab("Day")
general_df %>%
group_by(date) %>% summarize(Total_cons = sum(energy_cons)/1000000) %>%
as_tsibble() %>%
filter_index("2018-01-01" ~ "2022-11-01") %>%
autoplot(Total_cons) +
autolayer(general_df %>%
group_by(date) %>% summarize(Total_cons = sum(energy_cons)/1000000) %>%
as_tsibble() %>%
filter_index("2018-01-01" ~ "2022-11-01"), slider::slide_dbl(Total_cons, mean,
.before = 2, .after = 2, .complete = TRUE), color = 'red', size =1.1) +
ggtitle("Total TX_1 store daily sales") +
ylab("sales") + xlab("Day")
general_df %>%
group_by(date) %>% summarize(Total_cons = sum(energy_cons)/1000000) %>%
as_tsibble() %>%
filter_index("2018-01-01" ~ "2022-11-01") %>%
autoplot(Total_cons) +
autolayer(general_df %>%
group_by(date) %>% summarize(Total_cons = sum(energy_cons)/1000000) %>%
as_tsibble() %>%
filter_index("2018-01-01" ~ "2022-11-01"), slider::slide_dbl(Total_cons, mean,
.before = 2, .after = 2, .complete = TRUE), color = 'red', size =2) +
ggtitle("Total TX_1 store daily sales") +
ylab("sales") + xlab("Day")
general_df %>%
group_by(date) %>% summarize(Total_cons = sum(energy_cons)/1000000) %>%
as_tsibble() %>%
filter_index("2018-01-01" ~ "2022-11-01") %>%
autoplot(Total_cons) +
autolayer(general_df %>%
group_by(date) %>% summarize(Total_cons = sum(energy_cons)/1000000) %>%
as_tsibble() %>%
filter_index("2018-01-01" ~ "2022-11-01"), slider::slide_dbl(Total_cons, mean,
.before = 2, .after = 2, .complete = TRUE), color = 'red', size =0.5) +
ggtitle("Total TX_1 store daily sales") +
ylab("sales") + xlab("Day")
general_df %>%
group_by(date) %>% summarize(Total_cons = sum(energy_cons)/1000000) %>%
as_tsibble() %>%
filter_index("2018-01-01" ~ "2022-11-01") %>%
autoplot(Total_cons, color = "gray") +
autolayer(components(STL_dcmpC), trend, color = 'red') +
ggtitle("Total TX_1 store daily sales") +
ylab("sales") + xlab("Day")
general_df %>%
group_by(date) %>% summarize(Total_cons = sum(energy_cons)/1000000) %>%
as_tsibble() %>%
filter_index("2018-01-01" ~ "2022-11-01") %>%
model(classical_decomposition(Total_cons, type =
"additive")) %>%
components() %>%
autoplot() + xlab("Year")
components(STL_dcmpC_1year) %>% autoplot()
general_df %>%
group_by(date) %>% summarize(Total_cons = sum(energy_cons)/1000000) %>%
as_tsibble() %>%
filter_index("2019-01-01" ~ "2019-12-31") %>%
model(classical_decomposition(Total_cons, type =
"additive")) %>%
components() %>%
autoplot() + xlab("Year")
general_df %>%
group_by(date) %>% summarize(Total_cons = sum(energy_cons)) %>%
as_tsibble() %>%
filter_index("2018-01-01" ~ "2022-11-01") %>%
ACF(Total_sales) %>%
autoplot()
general_df %>%
group_by(date) %>% summarize(Total_cons = sum(energy_cons)) %>%
as_tsibble() %>%
filter_index("2018-01-01" ~ "2022-11-01") %>%
ACF(Total_cons) %>%
autoplot()
general_df %>%
group_by(date) %>% summarize(Total_cons = sum(energy_prod)) %>%
as_tsibble() %>%
filter_index("2018-01-01" ~ "2022-11-01") %>%
ACF(Total_cons) %>%
autoplot()
general_df %>%
group_by(date) %>% summarize(Total_cons = sum(energy_cons)) %>%
as_tsibble() %>%
filter_index("2018-01-01" ~ "2022-11-01") %>%
ACF(Total_cons) %>%
autoplot()
general_df %>%
group_by(date) %>% summarize(Total_cons = sum(energy_prod)) %>%
as_tsibble() %>%
filter_index("2018-01-01" ~ "2022-11-01") %>%
ACF(Total_cons) %>%
autoplot()
general_df %>%
group_by(date) %>% summarize(Total_cons = sum(energy_cons)/1000000) %>%
as_tsibble() %>%
filter_index("2019-01-01" ~ "2019-12-31") %>%
model(classical_decomposition(Total_cons, type =
"additive")) %>%
components() %>%
autoplot() + xlab("Year")
general_dfM %>%
group_by(month) %>% summarize(Total_cons = sum(energy_cons)) %>%
as_tsibble() %>%
filter_index("2018-01-01" ~ "2022-11-01") %>%
ACF(Total_cons) %>%
autoplot()
general_dfM %>%
group_by(month) %>% summarize(Total_cons = sum(energy_cons)) %>%
as_tsibble() %>%
filter_index(. ~ "2022-11-01") %>%
ACF(Total_cons) %>%
autoplot()
general_dfM %>%
group_by(month) %>% summarize(Total_cons = sum(energy_prod)) %>%
as_tsibble() %>%
filter_index(. ~ "2022-11-01") %>%
ACF(Total_cons) %>%
autoplot()
general_df %>%
group_by(time) %>% summarize(Total_cons = sum(pos_secund)) %>%
as_tsibble() %>%
filter_index("2019-01-06" ~ "2019-01-30") %>%
autoplot() +
ggtitle("Total energy consumed in CH") +
ylab("Ammount in million of kWh") + xlab("Date") #Check outliers
general_df %>%
group_by(time) %>% summarize(Total_cons = sum(pos_secund)/1000) %>%
as_tsibble() %>%
filter_index("2019-01-06" ~ "2019-01-30") %>%
autoplot() +
ggtitle("Total energy consumed in CH") +
ylab("Ammount in million of kWh") + xlab("Date") #Check outliers
general_df %>%
group_by(date) %>% summarize(Total_cons = sum(pos_secund)/1000) %>%
as_tsibble() %>%
filter_index("2019-01-06" ~ "2019-01-30") %>%
autoplot() +
ggtitle("Total energy consumed in CH") +
ylab("Ammount in million of kWh") + xlab("Date") #Check outliers
general_df %>%
group_by(date) %>% summarize(Total_cons = sum(pos_secund)/1000) %>%
as_tsibble() %>%
filter_index("2019-01-01" ~ "2022-11-01") %>%
autoplot() +
ggtitle("Total energy consumed in CH") +
ylab("Ammount in million of kWh") + xlab("Date") #Check outliers
general_df %>%
group_by(date) %>% summarize(Total_cons = sum(neg_secund)/1000) %>%
as_tsibble() %>%
filter_index("2019-01-01" ~ "2022-11-01") %>%
autoplot() +
ggtitle("Total energy consumed in CH") +
ylab("Ammount in million of kWh") + xlab("Date") #Check outliers
general_df %>%
group_by(date) %>% summarize(Total_cons = sum(neg_tertiary)/1000) %>%
as_tsibble() %>%
filter_index("2019-01-01" ~ "2022-11-01") %>%
autoplot() +
ggtitle("Total energy consumed in CH") +
ylab("Ammount in million of kWh") + xlab("Date") #Check outliers
general_df %>%
group_by(date) %>% summarize(Total_cons = sum(neg_secund)/1000) %>%
as_tsibble() %>%
filter_index("2019-01-01" ~ "2022-11-01") %>%
autoplot() +
ggtitle("Total energy consumed in CH") +
ylab("Ammount in million of kWh") + xlab("Date") #Check outliers
general_df %>%
group_by(date) %>% summarize(Total_cons = sum(pos_secund)/1000) %>%
as_tsibble() %>%
filter_index("2019-01-01" ~ "2022-11-01") %>%
autoplot() +
ggtitle("Total energy consumed in CH") +
ylab("Ammount in million of kWh") + xlab("Date") #Check outliers
general_df %>%
group_by(date) %>% summarize(Total_cons = sum(pos_secund)/1000) %>%
as_tsibble() %>%
filter_index("2019-01-01" ~ "2022-11-01") %>%
autoplot() +
ggtitle("Total energy consumed in CH") +
ylab("Ammount in million of kWh") + xlab("Date") #Check outliers
general_df %>%
group_by(date) %>% summarize(Total_cons = sum(neg_secund)/1000) %>%
as_tsibble() %>%
filter_index("2019-01-01" ~ "2022-11-01") %>%
autoplot() +
ggtitle("Total energy consumed in CH") +
ylab("Ammount in million of kWh") + xlab("Date") #Check outliers
general_df %>%
group_by(date) %>% summarize(Total_cons = sum(pos_tertiary)/1000) %>%
as_tsibble() %>%
filter_index("2019-01-01" ~ "2022-11-01") %>%
autoplot() +
ggtitle("Total energy consumed in CH") +
ylab("Ammount in million of kWh") + xlab("Date") #Check outliers
general_df %>%
group_by(date) %>% summarize(Total_cons = sum(neg_tertiary)/1000) %>%
as_tsibble() %>%
filter_index("2019-01-01" ~ "2022-11-01") %>%
autoplot() +
ggtitle("Total energy consumed in CH") +
ylab("Ammount in million of kWh") + xlab("Date") #Check outliers
general_df %>%
group_by(date) %>% summarize(Total_cons = sum(pos_tertiary)/1000) %>%
as_tsibble() %>%
filter_index("2019-01-01" ~ "2022-11-01") %>%
autoplot() +
ggtitle("Total energy consumed in CH") +
ylab("Ammount in million of kWh") + xlab("Date") #Check outliers
general_df %>%
group_by(date) %>% summarize(Total_cons = sum(pos_secund)/1000) %>%
as_tsibble() %>%
filter_index("2019-01-01" ~ "2022-11-01") %>%
autoplot() +
ggtitle("Total energy consumed in CH") +
ylab("Ammount in million of kWh") + xlab("Date") #Check outliers
general_df %>%
group_by(date) %>% summarize(Total_cons = sum(neg_secund)/1000) %>%
as_tsibble() %>%
filter_index("2019-01-01" ~ "2022-11-01") %>%
autoplot() +
ggtitle("Total energy consumed in CH") +
ylab("Ammount in million of kWh") + xlab("Date") #Check outliers
source(file = here::here("Scripts/Cleaning_and_Wrangling.R"))
general_df %>%
group_by(date) %>% summarize(Total_cons = sum(pos_secund)/1000) %>%
as_tsibble() %>%
filter_index("2019-01-01" ~ "2022-11-01") %>%
autoplot() +
ggtitle("Total energy consumed in CH") +
ylab("Ammount in million of kWh") + xlab("Date") #Check outliers
general_df %>%
group_by(date) %>% summarize(Total_cons = sum(neg_secund)/1000) %>%
as_tsibble() %>%
filter_index("2019-01-01" ~ "2022-11-01") %>%
autoplot() +
ggtitle("Total energy consumed in CH") +
ylab("Ammount in million of kWh") + xlab("Date") #Check outliers
general_df %>%
group_by(date) %>% summarize(Total_cons = sum(pos_tertiary)/1000) %>%
as_tsibble() %>%
filter_index("2019-01-01" ~ "2022-11-01") %>%
autoplot() +
ggtitle("Total energy consumed in CH") +
ylab("Ammount in million of kWh") + xlab("Date") #Check outliers
general_df %>%
group_by(date) %>% summarize(Total_cons = sum(neg_tertiary)/1000) %>%
as_tsibble() %>%
filter_index("2019-01-01" ~ "2022-11-01") %>%
autoplot() +
ggtitle("Total energy consumed in CH") +
ylab("Ammount in million of kWh") + xlab("Date") #Check outliers
general_df %>%
group_by(date) %>% summarize(Total_cons = sum(pos_tertiary)/1000) %>%
as_tsibble() %>%
filter_index("2019-01-01" ~ "2022-11-01") %>%
autoplot() +
ggtitle("Total energy consumed in CH") +
ylab("Ammount in million of kWh") + xlab("Date") #Check outliers
source(file = here::here("Scripts/Cleaning_and_Wrangling.R"))
canton_df_long %>%
head(10) %>%
kable() %>%
kable_styling()
canton_df_long %>%
group_by(Cantons) %>%
summarize(n = n())
canton_df_long %>% group_by(date, Cantons) %>%
summarize(total = sum(production)) %>%
as_tsibble(index = date, key = Cantons) %>%
filter_index("2019-01-01" ~ "2019-12-31") %>%
autoplot() +
ggtitle("Total energy consumed in CH") +
ylab("Ammount in million of kWh") + xlab("Date") #Check outliers
canton_df_long %>%
mutate(month = yearmonth(date), year = year(date)) %>%
group_by(month, Cantons) %>%
summarize(total = sum(production)) %>%
as_tsibble(index = month, key = Cantons) %>%
filter_index("2019-01-01" ~ "2019-12-31") %>%
autoplot() +
ggtitle("Total energy consumed in CH") +
ylab("Ammount in million of kWh") + xlab("Date") #Check outliers
canton_df_long %>%
mutate(month = yearmonth(date), year = year(date)) %>%
group_by(month, Cantons) %>%
summarize(total = sum(production)) %>%
as_tsibble(index = month, key = Cantons) %>%
filter_index(. ~ "2019-12-31") %>%
autoplot() +
ggtitle("Total energy consumed in CH") +
ylab("Ammount in million of kWh") + xlab("Date") #Check outliers
